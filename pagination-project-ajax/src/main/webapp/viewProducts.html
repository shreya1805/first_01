<html>
	<head>
			<title>Pagination Project</title>
			<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
			<link rel="stylesheet" type="text/css" href="css/mdb.min.css" />
	    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	    <script type="text/javascript">
	    	$("document").ready(function(){
	    		url = 'ProductControllerServlet';
	    		fetchProducts(url);
	    		
	    		$("#prev").click(function(){
		    		url = 'ProductControllerServlet?go=prev';
		    		fetchProducts(url);
		    		$("#tbl").children().remove();
		    	})
		    	
		    	$("#next").click(function(){
		    		url = 'ProductControllerServlet?go=next';
		    		fetchProducts(url);
		    		$("#tbl").children().remove();
		    	})
		    	
				function fetchProducts(url){
					$(function() {
			        	{
			                $.ajax({
			                    url: url,
			                    type: "GET",
			                    dataType: "json",
			                    timeout: 3000,
			                    success: function(response) {
			                        
			                        $.each(response, function(index, product) {
			                            var row = $("<tr/>");
			                            var col1 = $("<td/>").text(product.id);
			                            var col2 = $("<td/>").text(product.name);
			                            var col3 = $("<td/>").text(product.price);
			                            var col4 = $("<td/>").text(product.quantity);
			                            row.append(col1);
			                            row.append(col2);
			                            row.append(col3);
			                            row.append(col4);
			                            $("#tbl").append(row);
			                        })
			                    }
			                })
			            }
			        })
				}     
	    	});
	    </script>
	</head>
	<body>
		<h3 class="h3-responsive p-4 text-center">Displaying rows by fetching data from Servlet</h3>
		<div class="table-repsonsive container-fluid">
			<table class="table table-striped table-bordered">
	    		<thead>
	    			<tr id='row'>
	    				<th><b>ID</b></th>
	    				<th><b>Name</b></th>
	    				<th><b>Price</b></th>
	    				<th><b>Quantity</b></th>
	    			</tr>
	    		</thead>
	    		<tbody id="tbl">
	    		
	    		</tbody>
	    	</table>
			<div class="text-center">
				<button class="btn btn-md btn-default" id="prev">Previous</button>
				<button class="btn btn-md btn-default" id="next">Next</button>
			</div>
		</div>
	</body>
</html>
